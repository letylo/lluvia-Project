<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Kernel-Foundation-Enumerable-Enumeration'>/**
</span> * @class Kernel.Foundation.Enumerable.Enumeration
 * Creates several symbolic constants
 *
 * ### Example:
 *
 *     Suit = new Enumeration(&quot;spades&quot;, &quot;hearts&quot;, &quot;diamonds&quot;, &quot;clovers&quot;)
 *     // { spades: 0, hearts: 1, diamonds: 2, clovers: 3}
 *
 *     Suit.hearts == 1
 *     // =&gt; true
 *
 *     var a = new Enumeration(&quot;spades&quot;, &quot;hearts&quot;, [ &quot;red&quot;, &quot;black&quot;], &quot;diamonds&quot;, &quot;clovers&quot;)
 *     Object.keys(a.hearts)
 *     // =&gt; red,black
 *
 *     a.hearts
 *     // =&gt; 1
 *
 *     a.hearts.red
 *     // =&gt; 1
 *
 * Attributes, as a.hearts, are holding
 * {@link Kernel.Foundation.DataType.VersionNumber VersionNumber} objects.
 *
 * ### Inner Structure
 *
 *     {
 *       &quot;spades&quot;: 0,
 *       &quot;hearts&quot;: { 1,
 *       	           &quot;red&quot;: 1,
 *       	           &quot;black&quot;: 2
 *                  },
 *        &quot;diamonds&quot;: 2,
 *        &quot;clovers&quot;: 3
 *     }
 *
 * ### Sugar
 *
 *  Despite,
 *
 *     a.hearts.black == 2
 *     //=&gt; true
 *
 * when stringifying,
 *
 *     a.hearts.black.toString()
 *     //=&gt; &quot;1.2&quot;
 *
 * due to {@link Kernel.Foundation.DataType.VersionNumber VersionNumber} properties.
 */

<span id='Kernel-Foundation-Enumerable-Enumeration-method-constructor'>/**
</span> * @method constructor
 * Create a list of constant given an
 * {@link Kernel.Foundation.Enumerable.InterleavedArray InterleavedArray}
 *
 * ### Example
 *
 *     var a = new Enumeration(&quot;spades&quot;, &quot;hearts&quot;, [ &quot;red&quot;, &quot;black&quot;], &quot;diamonds&quot;, &quot;clovers&quot;)
 *
 * @param {String...} constants List of constants to be used as an InterleavedArray.
 */
function Enumeration(constants) {
    Object.defineProperty(this, &quot;ia&quot;, {
        value: new(ApplyProxyConstructor(InterleavedArray, arguments)),
        enumerable: false,
    })

    /* this.ia
       {
	      &quot;0&quot;: &quot;spades&quot;,
	      &quot;1&quot;: &quot;hearts&quot;,
	      &quot;1.1&quot;: &quot;red&quot;,
	      &quot;1.2&quot;: &quot;black&quot;,
	      &quot;2&quot;: &quot;diamonds&quot;,
	      &quot;3&quot;: &quot;clovers&quot;
       }
     will be turned inside this into:
         {
       &quot;spades&quot;: 0,
       &quot;hearts&quot;: { 1,
       	           &quot;red&quot;: 1,
       	           &quot;black&quot;: 2
                  },
        &quot;diamonds&quot;: 2,
        &quot;clovers&quot;: 3
        }
        in the following lines.
     */

    var keys = this.ia.keys()
    for (var k = 0; k &lt; keys.length; k++) {
        var ia_value = this.ia[keys[k]]
        var deep = this
        var key_chain = keys[k].split(&quot;.&quot;)

        for (var i = 0; i &lt; key_chain.length - 1; i++) {
            var parent = this.ia[key_chain.slice(0, i + 1).join(&quot;.&quot;)]

            if (parent in deep)
                deep = deep[parent]
        }
        deep[ia_value] = new VersionNumber(keys[k])
        Object.defineProperty(deep[ia_value], &quot;name&quot;, {
            value: ia_value
        })
    }
}</pre>
</body>
</html>
